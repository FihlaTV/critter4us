<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: 1.1.txt</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>1.1.txt</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>doc/release_notes/1.1.txt
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Jul 25 16:28:14 -0500 2009</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h3>DRY <a href="../../../classes/Sequel.html">Sequel</a> models</h3>
<p>
With the new <a href="../../../classes/Sequel.html">Sequel</a> release you
no longer need to explicitly specify the table name for each model class,
assuming your model name is the singular of the table name (just like in
ActiveRecord or DataMapper):
</p>
<pre>
  class UglyBug &lt; Sequel::Model
  end

  UglyBug.table_name #=&gt; :ugly_bugs
</pre>
<h3>New model validations and support for virtual attributes</h3>
<p>
<a href="../../../classes/Sequel.html">Sequel</a> model now include
validation functionality which largly follows the validations offered in
ActiveRecord. Validations can be checked anytime by calling Model#valid?,
with validation errors accessible through Model#errors:
</p>
<pre>
  class Item &lt; Sequel::Model
    validates_presence_of :name
  end

  my_item = Item.new
  my_item.valid? #=&gt; false
  my_item.errors.full_messages #=&gt; [&quot;name is not present&quot;]
</pre>
<p>
The Model#save method has been changed to check for validity before saving.
If the model instance is not valid, the save method returns false without
saving the instance. You can also bypass the validity test by calling
Model#save! instead.
</p>
<p>
Model classes also now support virtual attributes, letting you assign
values to any attribute (virtual or persistent) at initialization time:
</p>
<pre>
  class User &lt; Sequel::Model
    attr_accessor :password
  end

  u = User.new(:password =&gt; 'blah', ...)
  u.password #=&gt; 'blah'
</pre>
<p>
Also, virtual attributes can be validated just like persistent attributes.
</p>
<h3>Other changes (long list!)</h3>
<ul>
<li>Added Model#reload as alias to Model#refresh.

</li>
<li>Changed Model.create to accept a block (126).

</li>
<li>Fixed Model#initialize to accept nil values (115).

</li>
<li>Added Model#update_with_params method with support for virtual

</li>
</ul>
<p>
attributes and auto-filtering of unrelated parameters, and changed
Model.create_with_params to support virtual attributes (128).
</p>
<ul>
<li>Fixed Model.dataset to correctly set the dataset if using implicit

</li>
</ul>
<p>
naming or inheriting the superclass dataset (thanks celldee).
</p>
<ul>
<li>Finalized support for virtual attributes.

</li>
<li>Fixed Model#set to work with string keys (143).

</li>
<li>Fixed Model.create to correctly initialize instances marked as new

</li>
</ul>
<p>
(135).
</p>
<ul>
<li>Fixed Model#initialize to convert string keys into symbol keys. This

</li>
</ul>
<p>
also fixes problem with validating objects initialized with string keys
(136).
</p>
<ul>
<li>Added Dataset#table_exists? convenience method.

</li>
<li>Changed Dataset#group_and_count to accept multiple columns (134).

</li>
<li>Added Dataset#select_all method.

</li>
<li>Added Dataset#select_more, Dataset#order_more methods (129).

</li>
<li>Fixed Dataset#count to work correctly for grouped datasets (144).

</li>
<li>Fixed joining datasets using aliased tables (140).

</li>
<li>Added support for UNSIGNED constraint, used in MySQL? (127).

</li>
<li>Implemented constraint definitions inside Database#create_table.

</li>
<li>Enhanced Database.connect to accept options with string keys, so it

</li>
</ul>
<p>
can now accept options loaded from YAML files. Database.connect also
automatically converts :username option into :user for compatibility with
existing YAML configuration files for AR and DataMapper.
</p>
<ul>
<li>Changed ODBC::Database to support connection using driver and

</li>
</ul>
<p>
database name, also added support for untitled columns in ODBC::Dataset
(thanks Leonid Borisenko).
</p>
<ul>
<li>Changed MySQL adapter to support specifying socket option.

</li>
<li>Fixed MySQL adapter to correctly format foreign key definitions

</li>
</ul>
<p>
(123).
</p>
<ul>
<li>Changed MySQL::Dataset to allow HAVING clause on ungrouped datasets,

</li>
</ul>
<p>
and put HAVING clause before ORDER BY clause (133).
</p>
<ul>
<li>Changed mysql adapter to default to localhost if :host option is not

</li>
</ul>
<p>
specified (114).
</p>
<ul>
<li>Added <a href="../../../classes/String.html#M000054">String#to_date</a>.
Updated mysql adapter to use <a
href="../../../classes/String.html#M000054">String#to_date</a>

</li>
</ul>
<p>
for mysql date types (thanks drfreeze).
</p>
<ul>
<li>Fixed postgres adapter to define PGconn#async_exec as alias to exec

</li>
</ul>
<p>
if not defined (for pure-ruby postgres driver).
</p>
<ul>
<li>Changed postgres adapter to quote column references using double

</li>
</ul>
<p>
quotes.
</p>
<ul>
<li>Applied patch for oracle adapter: fix behavior of limit and offset,

</li>
</ul>
<p>
transactions, table_exists?, tables and additional specs (thanks Liming
Lian 122).
</p>
<ul>
<li>Added support additional field types in postgresql adapter (146).

</li>
<li>Added support for date field types in postgresql adapter (145).

</li>
<li>Added support for limiting and paginating datasets with fixed SQL,

</li>
</ul>
<p>
e.g. using Database#fetch.
</p>
<ul>
<li>Added new Dataset#from_self method that returns a dataset selecting

</li>
</ul>
<p>
from the original dataset.
</p>
<ul>
<li>Allow for additional filters on a grouped dataset (119 and 120)

</li>
<li>Refactored Sequelizer to use Proc#to_sexp (method provided by r2r).

</li>
<li>Fixed bin/sequel to require sequel_model if available.

</li>
</ul>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>